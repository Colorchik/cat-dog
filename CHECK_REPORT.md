# üìã –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **nginx/nginx.conf** - –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/api` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend
2. **server/Dockerfile** - –£–ø—Ä–æ—â–µ–Ω (—É–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π builder stage)
3. **deploy.sh** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π (–º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ entrypoint)

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### ‚úÖ Dockerfile –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (`client/Dockerfile`)
- ‚úÖ Multi-stage build –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ü–æ—Ä—Ç—ã —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### ‚úÖ Dockerfile –¥–ª—è –±—ç–∫–µ–Ω–¥–∞ (`server/Dockerfile`)
- ‚úÖ Production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω
- ‚úÖ Entrypoint —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Health check –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Netcat —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î

#### ‚úÖ docker-compose.yml
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Volumes –∏ networks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

#### ‚úÖ nginx/nginx.conf
- ‚úÖ Reverse proxy –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç `/api` –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ backend
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç `/` –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ frontend
- ‚úÖ Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Gzip compression –≤–∫–ª—é—á–µ–Ω
- ‚úÖ SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∑–∂–µ)

#### ‚úÖ server/docker-entrypoint.sh
- ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î
- ‚úÖ –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è
- ‚úÖ deploy.sh - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Å–±–æ—Ä–∫–∞, –∑–∞–ø—É—Å–∫
- ‚úÖ setup-server.sh - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

```
cat-dog/
‚îú‚îÄ‚îÄ client/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile          ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf          ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile          ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îÇ   ‚îî‚îÄ‚îÄ docker-entrypoint.sh ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf          ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω (–¥–æ–±–∞–≤–ª–µ–Ω /api)
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf.dev      ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îú‚îÄ‚îÄ docker-compose.yml      ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îú‚îÄ‚îÄ deploy.sh               ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω
‚îú‚îÄ‚îÄ setup-server.sh         ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îú‚îÄ‚îÄ .dockerignore           ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚îî‚îÄ‚îÄ .env.example            ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**
   - –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –∏–∑ `.env.example`
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 —Å–≤–æ–±–æ–¥–Ω—ã

2. **–î–ª—è production:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
   - –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ HTTPS —Å–µ–∫—Ü–∏—é –≤ `nginx/nginx.conf`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è
   - –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–∑—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ docker-compose
docker compose config

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Dockerfile
docker build -t test-client ./client
docker build -t test-server ./server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker run --rm -v $(pwd)/nginx/nginx.conf:/etc/nginx/nginx.conf:ro nginx:alpine nginx -t
```

### –°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!

